# Linux 基础运维实战练习题：进程管理篇

**一、基础入门题（进程查询与识别）**

1. 写出查询当前系统中 **所有运行进程** 的 3 种不同命令（要求输出格式不同）。
2. 查找进程名为 `sshd` 的所有进程，要求显示进程 PID、父进程 PID（PPID）、进程状态（STAT）、启动时间（STIME）。
3. 查找由用户 `root` 启动的所有进程，并按 **CPU 使用率降序排序**。
4. 统计当前系统中处于 **运行状态（R 状态）** 的进程总数。
5. 查看 PID 为 1 的进程（init/systemd）的详细信息（包括进程启动命令、占用资源、所属用户等）。



 **二、进阶操作题（进程状态控制）**

6. 启动一个后台进程（执行 `sleep 3600`，让进程休眠 1 小时），要求：

  \- 直接在后台运行，不占用当前终端；

  \- 查看该后台进程的 PID 和状态；

  \- 用两种不同命令将其终止。

7. 现有一个前台运行的 `top` 进程（占用终端），请完成：

  \- 将其暂停（挂起）并放回后台；

  \- 查看后台挂起的进程列表；

  \- 将该挂起的 `top` 进程恢复到前台运行；

  \- 不关闭 `top` 进程的前提下，切换回终端执行其他命令。

8. 批量终止所有名称包含 `java` 的进程（要求安全终止，优先发送 `SIGTERM` 信号，而非强制杀死）。
9. 强制终止一个处于 **僵尸状态（Z 状态）** 的进程（PID 假设为 1234），写出完整命令并说明原理。
10. 启动 `vim test.txt` 后不小心关闭了终端，导致进程变成“孤儿进程”，如何找到并终止该进程？



 **三、深度应用题（优先级与监控）**

11. 调整进程 PID 为 5678 的优先级：

  \- 查看该进程当前的静态优先级（nice 值）和动态优先级（pri 值）；

  \- 将其 nice 值设置为 -5（要求用两种命令实现：`nice` 和 `renice`）；

  \- 验证优先级调整是否生效。

12. 编写一个简单的 Shell 脚本，实现：

  \- 后台运行 `ping baidu.com -i 2`（每 2 秒 ping 一次）；

  \- 记录该进程的 PID 到文件 `ping.pid`；

  \- 10 秒后自动终止该 ping 进程（通过读取 `ping.pid` 中的 PID 实现）。

13. 用 `ps` 结合管道命令，筛选出 **内存占用前 5 的进程**，要求输出格式为：`PID %MEM COMMAND`（仅显示这三列）。
14. 用 `htop`（需提前安装）监控进程，完成：

  \- 按 CPU 使用率排序进程；

  \- 筛选出用户 `nginx` 所属的所有进程；

  \- 直接在 `htop` 界面中终止一个占用 CPU 过高的 `nginx` 进程。

15. 分析场景：CentOS 系统中，`httpd` 进程频繁占用 90% 以上 CPU，如何排查并临时解决该问题？（要求步骤清晰，包括进程查询、状态分析、临时处理方案）。





 **解题提示**

 **一、基础题提示**

1. `ps aux`（BSD 格式）、`ps -ef`（System V 格式）、`pstree`（树形结构）；
2. `ps -ef | grep sshd` 或 `ps aux | grep sshd`，结合 `awk` 筛选列：`ps aux | grep sshd | awk '{print $2, $3, $8, $9}'`；
3. `ps -u root --sort=-%cpu`；
4. `ps aux | grep -c ' R '`（注意 R 前后空格，避免匹配其他状态）；
5. `ps -p 1 -f`（详细格式）或 `systemctl status systemd`

![](/documents/img/ops/linux/basic/jincheng/25.png)

 **二、进阶题提示**

6. 后台运行：`sleep 3600 &`；查看：`jobs` 或 `ps aux | grep sleep`；终止：`kill PID` 或 `pkill -f sleep`；
7. 暂停：`Ctrl + Z`；查看后台：`jobs`；恢复前台：`fg %1`（%1 为 jobs 列表中的序号）；临时切换终端：`bg %1` 后直接输入命令；
8. `pkill -15 java`（15 对应 SIGTERM 信号）或 `killall -s TERM java`；
9. 僵尸进程无法直接杀死，需杀死其父进程：`ps -ef | grep 1234` 找到 PPID，再 `kill -9 PPID`；
10. 查找孤儿进程（PPID 为 1）：`ps aux | grep -E 'vim|test.txt' | grep -v grep`，找到后 `kill PID`。



 **三、深度题提示**

11. 查看优先级：`ps -p 5678 -o nice,pri`；调整：`renice -n -5 5678` 或 `nice -n -5 命令`（需重新启动进程）；验证：`ps -p 5678 -o nice,pri`；
12. 脚本示例：（不用做！）

  \#!/bin/bash

  ping baidu.com -i 2 &

  echo $! > ping.pid # $! 表示最后一个后台进程的 PID

  sleep 10

  kill $(cat ping.pid)

  echo "Ping 进程已终止"



13. `ps aux --sort=-%mem | awk '{print $2, $4, $11}' | head -n 6`（head -n 6 是因为第一行是标题）；
14. htop 操作：F6 选择排序字段（CPU%），F4 输入筛选条件 `nginx`，选中进程按 F9 选择 `SIGKILL` 终止；
15. 排查步骤：① `top` 或 `ps aux | grep httpd` 确认进程 PID 和占用情况；② `strace -p PID` 查看进程系统调用（是否卡IO）；③ `netstat -anp | grep httpd` 查看连接数（是否遭攻击）；④ 临时解决：`kill -15 PID` 重启进程，或 `systemctl restart httpd`