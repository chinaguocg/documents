# Ansible 初识二：playbook

关于配置文件

定义： 规范ansible行为的文件

默认配置文件： /etc/ansible/ansible.cfg  

在项目目录下新建配置文件  /home/xxx/yyy/ansible.cfg:

```bash
[defaults]
inventory=/home/jess/project/inventory
remote_user=jess
ask_pass=no



[privilege_escalation]
become=True
become_method=sudo
become_user=root
become_ask_pass=False
```

> 术语解释：
> inventory=指向清单文件位置
>
> remote_user=指定远程登录用户
>
> ask_pass=询问是否在登陆时要密码
>
>  
>
> become=是否要提权
>
> become_method=提权方式
>
> become_user=提权成哪个用户
>
> become_ask_pass=提权操作时是否要密码

 

关于临时命令（ad-hoc)

定义： 用于指定一次性的单一的任务

语法：

ansible  主机|组  -m 模块名称  [-a  ‘模块参数’]

EX:  为node2创建名为qfuser用户

ansible  node2  -m  user  -a ‘name=qfuser  state=present’

**<u>补充内容： 有两个非幂等性的模块，shell和command。这两个模块可以直接加入Linux常规命令。</u>**



**关于playbooks**

定义：定义重复多样的任务

playbook文件名称必须是.yaml或yml结尾。

任何playbook都由”---” 开始，并且以“。。。”结尾，但一般忽略。

> playbook都至少一个play组成，每个play是有三个元素：
>
> name: 指定play的名称
>
> hosts：主机名称或组
>
> tasks：指定任务列表
>
> 遇到“-”或冒号时，需要空一格。
>
> 相同级别的元素缩进必须一致，子项的缩进大于父项。
>
> 列表使用“-”开头，代表属性相同的元素
>
> 例如：
>
> \- red
>
> \- black
>
> \- yellow
>
> 使用ansible-playbook去执行剧本文件



关于获取模块的帮助

使用ansible-doc 获取模块的帮助信息

ansible-doc  -l  列出所有模块

```
EX:  按照要求实现playbook

1） 在node2中搭建httpd服务   yum模块

2） 在/var/www/html/下创建index.html文件，该文件的内容为：“[www.qfedu.com](http://www.qfedu.com)”    copy模块

3） 将80TCP端口在防火墙中放行   firewalld模块

4） 重启web服务，并浏览页面   service模块
```

完整示例如下

```bash
Xshell 5 (Build 0964)
Copyright (c) 2002-2016 NetSarang Computer, Inc. All rights reserved.

Type `help' to learn how to use Xshell prompt.
[d:\~]$ 

Connecting to 192.168.72.131:22...
Connection established.
To escape to local shell, press 'Ctrl+Alt+]'.

Last login: Mon Oct 27 08:41:56 2025 from 192.168.72.1
[root@bogon ~]# su - jess
Last login: Mon Oct 27 10:28:29 EDT 2025 on pts/0
[jess@bogon ~]$ ll
total 4
-rw-rw-r--. 1 jess jess 38 Oct 27 10:42 inventory
drwxrwxr-x. 2 jess jess  6 Oct 27 10:37 project
[jess@bogon ~]$ cd project
[jess@bogon project]$ ll
total 0
[jess@bogon project]$ ls
[jess@bogon project]$ cp ../inventory ./inventory
[jess@bogon project]$ ll
total 4
-rw-rw-r--. 1 jess jess 38 Oct 27 21:17 inventory
[jess@bogon project]$ sudo vim /etc/ansible/ansible.cfg
sudo: vim: command not found
[jess@bogon project]$ sudo vi /etc/ansible/ansible.cfg
[jess@bogon project]$ vi ansible.cfg
[jess@bogon project]$ ansible nodegroup --list-hosts
  hosts (1):
    node2
[jess@bogon project]$ ansible nodegroup -m user -a  'name=qfuser,state=present'
node2 | FAILED! => {
    "ansible_facts": {
        "discovered_interpreter_python": "/usr/bin/python"
    }, 
    "changed": false, 
    "msg": "useradd: invalid user name 'qfuser,state=present'\n", 
    "name": "qfuser,state=present", 
    "rc": 3
}
[jess@bogon project]$ ansible nodegroup -m user -a  'name=qfuser state=present'
node2 | CHANGED => {
    "ansible_facts": {
        "discovered_interpreter_python": "/usr/bin/python"
    }, 
    "changed": true, 
    "comment": "", 
    "create_home": true, 
    "group": 1002, 
    "home": "/home/qfuser", 
    "name": "qfuser", 
    "shell": "/bin/bash", 
    "state": "present", 
    "system": false, 
    "uid": 1002
}
[jess@bogon project]$ ansible nodegroup -m shell -a  'useradd qfuser'
node2 | FAILED | rc=9 >>
useradd: user 'qfuser' already existsnon-zero return code
[jess@bogon project]$ ansible nodegroup -m user -a  'name=qfuser state=present'
node2 | SUCCESS => {
    "ansible_facts": {
        "discovered_interpreter_python": "/usr/bin/python"
    }, 
    "append": false, 
    "changed": false, 
    "comment": "", 
    "group": 1002, 
    "home": "/home/qfuser", 
    "move_home": false, 
    "name": "qfuser", 
    "shell": "/bin/bash", 
    "state": "present", 
    "uid": 1002
}
[jess@bogon project]$ ansible nodegroup -m shell -a  'useradd qfuser'
node2 | FAILED | rc=9 >>
useradd: user 'qfuser' already existsnon-zero return code
[jess@bogon project]$ ansible nodegroup -m shell -a  'id qfuser'
node2 | CHANGED | rc=0 >>
uid=1002(qfuser) gid=1002(qfuser) groups=1002(qfuser)
[jess@bogon project]$ ansible nodegroup -m command -a  'id qfuser'
node2 | CHANGED | rc=0 >>
uid=1002(qfuser) gid=1002(qfuser) groups=1002(qfuser)
[jess@bogon project]$ ls
ansible.cfg  inventory
[jess@bogon project]$ vi first.yaml
[jess@bogon project]$ vim first.yaml
-bash: vim: command not found
[jess@bogon project]$ ansible-playbook first.yaml

PLAY [create playbook] ******************************************************************************************************************************************************************************************

TASK [Gathering Facts] ******************************************************************************************************************************************************************************************
ok: [node2]

TASK [create user] **********************************************************************************************************************************************************************************************
changed: [node2]

PLAY RECAP ******************************************************************************************************************************************************************************************************
node2                      : ok=2    changed=1    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   

[jess@bogon project]$ ansible-playbook first.yaml

PLAY [create playbook] ******************************************************************************************************************************************************************************************

TASK [Gathering Facts] ******************************************************************************************************************************************************************************************
ok: [node2]

TASK [create user] **********************************************************************************************************************************************************************************************
ok: [node2]

PLAY RECAP ******************************************************************************************************************************************************************************************************
node2                      : ok=2    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   

[jess@bogon project]$ sudo yum install vim
Loaded plugins: fastestmirror
base                                                                                                                                                                                      | 3.6 kB  00:00:00     
epel                                                                                                                                                                                      | 4.3 kB  00:00:00     
extras                                                                                                                                                                                    | 2.9 kB  00:00:00     
updates                                                                                                                                                                                   | 2.9 kB  00:00:00     
Loading mirror speeds from cached hostfile
Resolving Dependencies
--> Running transaction check
---> Package vim-enhanced.x86_64 2:7.4.629-8.el7_9 will be installed
--> Processing Dependency: vim-common = 2:7.4.629-8.el7_9 for package: 2:vim-enhanced-7.4.629-8.el7_9.x86_64
--> Processing Dependency: perl(:MODULE_COMPAT_5.16.3) for package: 2:vim-enhanced-7.4.629-8.el7_9.x86_64
--> Processing Dependency: libperl.so()(64bit) for package: 2:vim-enhanced-7.4.629-8.el7_9.x86_64
--> Processing Dependency: libgpm.so.2()(64bit) for package: 2:vim-enhanced-7.4.629-8.el7_9.x86_64
--> Running transaction check
---> Package gpm-libs.x86_64 0:1.20.7-6.el7 will be installed
---> Package perl.x86_64 4:5.16.3-299.el7_9 will be installed
--> Processing Dependency: perl(Socket) >= 1.3 for package: 4:perl-5.16.3-299.el7_9.x86_64
--> Processing Dependency: perl(Scalar::Util) >= 1.10 for package: 4:perl-5.16.3-299.el7_9.x86_64
--> Processing Dependency: perl-macros for package: 4:perl-5.16.3-299.el7_9.x86_64
--> Processing Dependency: perl(threads::shared) for package: 4:perl-5.16.3-299.el7_9.x86_64
--> Processing Dependency: perl(threads) for package: 4:perl-5.16.3-299.el7_9.x86_64
--> Processing Dependency: perl(constant) for package: 4:perl-5.16.3-299.el7_9.x86_64
--> Processing Dependency: perl(Time::Local) for package: 4:perl-5.16.3-299.el7_9.x86_64
--> Processing Dependency: perl(Time::HiRes) for package: 4:perl-5.16.3-299.el7_9.x86_64
--> Processing Dependency: perl(Storable) for package: 4:perl-5.16.3-299.el7_9.x86_64
--> Processing Dependency: perl(Socket) for package: 4:perl-5.16.3-299.el7_9.x86_64
--> Processing Dependency: perl(Scalar::Util) for package: 4:perl-5.16.3-299.el7_9.x86_64
--> Processing Dependency: perl(Pod::Simple::XHTML) for package: 4:perl-5.16.3-299.el7_9.x86_64
--> Processing Dependency: perl(Pod::Simple::Search) for package: 4:perl-5.16.3-299.el7_9.x86_64
--> Processing Dependency: perl(Getopt::Long) for package: 4:perl-5.16.3-299.el7_9.x86_64
--> Processing Dependency: perl(Filter::Util::Call) for package: 4:perl-5.16.3-299.el7_9.x86_64
--> Processing Dependency: perl(File::Temp) for package: 4:perl-5.16.3-299.el7_9.x86_64
--> Processing Dependency: perl(File::Spec::Unix) for package: 4:perl-5.16.3-299.el7_9.x86_64
--> Processing Dependency: perl(File::Spec::Functions) for package: 4:perl-5.16.3-299.el7_9.x86_64
--> Processing Dependency: perl(File::Spec) for package: 4:perl-5.16.3-299.el7_9.x86_64
--> Processing Dependency: perl(File::Path) for package: 4:perl-5.16.3-299.el7_9.x86_64
--> Processing Dependency: perl(Exporter) for package: 4:perl-5.16.3-299.el7_9.x86_64
--> Processing Dependency: perl(Cwd) for package: 4:perl-5.16.3-299.el7_9.x86_64
--> Processing Dependency: perl(Carp) for package: 4:perl-5.16.3-299.el7_9.x86_64
---> Package perl-libs.x86_64 4:5.16.3-299.el7_9 will be installed
---> Package vim-common.x86_64 2:7.4.629-8.el7_9 will be installed
--> Processing Dependency: vim-filesystem for package: 2:vim-common-7.4.629-8.el7_9.x86_64
--> Running transaction check
---> Package perl-Carp.noarch 0:1.26-244.el7 will be installed
---> Package perl-Exporter.noarch 0:5.68-3.el7 will be installed
---> Package perl-File-Path.noarch 0:2.09-2.el7 will be installed
---> Package perl-File-Temp.noarch 0:0.23.01-3.el7 will be installed
---> Package perl-Filter.x86_64 0:1.49-3.el7 will be installed
---> Package perl-Getopt-Long.noarch 0:2.40-3.el7 will be installed
--> Processing Dependency: perl(Pod::Usage) >= 1.14 for package: perl-Getopt-Long-2.40-3.el7.noarch
--> Processing Dependency: perl(Text::ParseWords) for package: perl-Getopt-Long-2.40-3.el7.noarch
---> Package perl-PathTools.x86_64 0:3.40-5.el7 will be installed
---> Package perl-Pod-Simple.noarch 1:3.28-4.el7 will be installed
--> Processing Dependency: perl(Pod::Escapes) >= 1.04 for package: 1:perl-Pod-Simple-3.28-4.el7.noarch
--> Processing Dependency: perl(Encode) for package: 1:perl-Pod-Simple-3.28-4.el7.noarch
---> Package perl-Scalar-List-Utils.x86_64 0:1.27-248.el7 will be installed
---> Package perl-Socket.x86_64 0:2.010-5.el7 will be installed
---> Package perl-Storable.x86_64 0:2.45-3.el7 will be installed
---> Package perl-Time-HiRes.x86_64 4:1.9725-3.el7 will be installed
---> Package perl-Time-Local.noarch 0:1.2300-2.el7 will be installed
---> Package perl-constant.noarch 0:1.27-2.el7 will be installed
---> Package perl-macros.x86_64 4:5.16.3-299.el7_9 will be installed
---> Package perl-threads.x86_64 0:1.87-4.el7 will be installed
---> Package perl-threads-shared.x86_64 0:1.43-6.el7 will be installed
---> Package vim-filesystem.x86_64 2:7.4.629-8.el7_9 will be installed
--> Running transaction check
---> Package perl-Encode.x86_64 0:2.51-7.el7 will be installed
---> Package perl-Pod-Escapes.noarch 1:1.04-299.el7_9 will be installed
---> Package perl-Pod-Usage.noarch 0:1.63-3.el7 will be installed
--> Processing Dependency: perl(Pod::Text) >= 3.15 for package: perl-Pod-Usage-1.63-3.el7.noarch
--> Processing Dependency: perl-Pod-Perldoc for package: perl-Pod-Usage-1.63-3.el7.noarch
---> Package perl-Text-ParseWords.noarch 0:3.29-4.el7 will be installed
--> Running transaction check
---> Package perl-Pod-Perldoc.noarch 0:3.20-4.el7 will be installed
--> Processing Dependency: perl(parent) for package: perl-Pod-Perldoc-3.20-4.el7.noarch
--> Processing Dependency: perl(HTTP::Tiny) for package: perl-Pod-Perldoc-3.20-4.el7.noarch
---> Package perl-podlators.noarch 0:2.5.1-3.el7 will be installed
--> Running transaction check
---> Package perl-HTTP-Tiny.noarch 0:0.033-3.el7 will be installed
---> Package perl-parent.noarch 1:0.225-244.el7 will be installed
--> Finished Dependency Resolution

Dependencies Resolved

=================================================================================================================================================================================================================
 Package                                                    Arch                                       Version                                                 Repository                                   Size
=================================================================================================================================================================================================================
Installing:
 vim-enhanced                                               x86_64                                     2:7.4.629-8.el7_9                                       updates                                     1.1 M
Installing for dependencies:
 gpm-libs                                                   x86_64                                     1.20.7-6.el7                                            base                                         32 k
 perl                                                       x86_64                                     4:5.16.3-299.el7_9                                      updates                                     8.0 M
 perl-Carp                                                  noarch                                     1.26-244.el7                                            base                                         19 k
 perl-Encode                                                x86_64                                     2.51-7.el7                                              base                                        1.5 M
 perl-Exporter                                              noarch                                     5.68-3.el7                                              base                                         28 k
 perl-File-Path                                             noarch                                     2.09-2.el7                                              base                                         26 k
 perl-File-Temp                                             noarch                                     0.23.01-3.el7                                           base                                         56 k
 perl-Filter                                                x86_64                                     1.49-3.el7                                              base                                         76 k
 perl-Getopt-Long                                           noarch                                     2.40-3.el7                                              base                                         56 k
 perl-HTTP-Tiny                                             noarch                                     0.033-3.el7                                             base                                         38 k
 perl-PathTools                                             x86_64                                     3.40-5.el7                                              base                                         82 k
 perl-Pod-Escapes                                           noarch                                     1:1.04-299.el7_9                                        updates                                      52 k
 perl-Pod-Perldoc                                           noarch                                     3.20-4.el7                                              base                                         87 k
 perl-Pod-Simple                                            noarch                                     1:3.28-4.el7                                            base                                        216 k
 perl-Pod-Usage                                             noarch                                     1.63-3.el7                                              base                                         27 k
 perl-Scalar-List-Utils                                     x86_64                                     1.27-248.el7                                            base                                         36 k
 perl-Socket                                                x86_64                                     2.010-5.el7                                             base                                         49 k
 perl-Storable                                              x86_64                                     2.45-3.el7                                              base                                         77 k
 perl-Text-ParseWords                                       noarch                                     3.29-4.el7                                              base                                         14 k
 perl-Time-HiRes                                            x86_64                                     4:1.9725-3.el7                                          base                                         45 k
 perl-Time-Local                                            noarch                                     1.2300-2.el7                                            base                                         24 k
 perl-constant                                              noarch                                     1.27-2.el7                                              base                                         19 k
 perl-libs                                                  x86_64                                     4:5.16.3-299.el7_9                                      updates                                     690 k
 perl-macros                                                x86_64                                     4:5.16.3-299.el7_9                                      updates                                      44 k
 perl-parent                                                noarch                                     1:0.225-244.el7                                         base                                         12 k
 perl-podlators                                             noarch                                     2.5.1-3.el7                                             base                                        112 k
 perl-threads                                               x86_64                                     1.87-4.el7                                              base                                         49 k
 perl-threads-shared                                        x86_64                                     1.43-6.el7                                              base                                         39 k
 vim-common                                                 x86_64                                     2:7.4.629-8.el7_9                                       updates                                     5.9 M
 vim-filesystem                                             x86_64                                     2:7.4.629-8.el7_9                                       updates                                      11 k

Transaction Summary
=================================================================================================================================================================================================================
Install  1 Package (+30 Dependent packages)

Total download size: 18 M
Installed size: 60 M
Is this ok [y/d/N]: y
Downloading packages:
(1/31): gpm-libs-1.20.7-6.el7.x86_64.rpm                                                                                                                                                  |  32 kB  00:00:00     
(2/31): perl-Carp-1.26-244.el7.noarch.rpm                                                                                                                                                 |  19 kB  00:00:00     
(3/31): perl-Exporter-5.68-3.el7.noarch.rpm                                                                                                                                               |  28 kB  00:00:00     
(4/31): perl-File-Path-2.09-2.el7.noarch.rpm                                                                                                                                              |  26 kB  00:00:00     
(5/31): perl-File-Temp-0.23.01-3.el7.noarch.rpm                                                                                                                                           |  56 kB  00:00:00     
(6/31): perl-Encode-2.51-7.el7.x86_64.rpm                                                                                                                                                 | 1.5 MB  00:00:02     
(7/31): perl-Getopt-Long-2.40-3.el7.noarch.rpm                                                                                                                                            |  56 kB  00:00:00     
(8/31): perl-HTTP-Tiny-0.033-3.el7.noarch.rpm                                                                                                                                             |  38 kB  00:00:00     
(9/31): perl-PathTools-3.40-5.el7.x86_64.rpm                                                                                                                                              |  82 kB  00:00:00     
(10/31): perl-Pod-Escapes-1.04-299.el7_9.noarch.rpm                                                                                                                                       |  52 kB  00:00:00     
(11/31): perl-Pod-Perldoc-3.20-4.el7.noarch.rpm                                                                                                                                           |  87 kB  00:00:00     
(12/31): perl-Pod-Simple-3.28-4.el7.noarch.rpm                                                                                                                                            | 216 kB  00:00:00     
(13/31): perl-Pod-Usage-1.63-3.el7.noarch.rpm                                                                                                                                             |  27 kB  00:00:00     
(14/31): perl-Scalar-List-Utils-1.27-248.el7.x86_64.rpm                                                                                                                                   |  36 kB  00:00:00     
(15/31): perl-Socket-2.010-5.el7.x86_64.rpm                                                                                                                                               |  49 kB  00:00:00     
(16/31): perl-Storable-2.45-3.el7.x86_64.rpm                                                                                                                                              |  77 kB  00:00:00     
(17/31): perl-Text-ParseWords-3.29-4.el7.noarch.rpm                                                                                                                                       |  14 kB  00:00:00     
(18/31): perl-Time-HiRes-1.9725-3.el7.x86_64.rpm                                                                                                                                          |  45 kB  00:00:00     
(19/31): perl-Time-Local-1.2300-2.el7.noarch.rpm                                                                                                                                          |  24 kB  00:00:00     
(20/31): perl-constant-1.27-2.el7.noarch.rpm                                                                                                                                              |  19 kB  00:00:00     
(21/31): perl-libs-5.16.3-299.el7_9.x86_64.rpm                                                                                                                                            | 690 kB  00:00:01     
(22/31): perl-macros-5.16.3-299.el7_9.x86_64.rpm                                                                                                                                          |  44 kB  00:00:00     
(23/31): perl-parent-0.225-244.el7.noarch.rpm                                                                                                                                             |  12 kB  00:00:00     
(24/31): perl-podlators-2.5.1-3.el7.noarch.rpm                                                                                                                                            | 112 kB  00:00:00     
(25/31): perl-threads-1.87-4.el7.x86_64.rpm                                                                                                                                               |  49 kB  00:00:00     
(26/31): perl-threads-shared-1.43-6.el7.x86_64.rpm                                                                                                                                        |  39 kB  00:00:00     
(27/31): perl-Filter-1.49-3.el7.x86_64.rpm                                                                                                                                                |  76 kB  00:00:06     
(28/31): perl-5.16.3-299.el7_9.x86_64.rpm                                                                                                                                                 | 8.0 MB  00:00:15     
(29/31): vim-enhanced-7.4.629-8.el7_9.x86_64.rpm                                                                                                                                          | 1.1 MB  00:00:02     
(30/31): vim-filesystem-7.4.629-8.el7_9.x86_64.rpm                                                                                                                                        |  11 kB  00:00:00     
(31/31): vim-common-7.4.629-8.el7_9.x86_64.rpm                                                                                                                                            | 5.9 MB  00:00:13     
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
Total                                                                                                                                                                            897 kB/s |  18 MB  00:00:20     
Running transaction check
Running transaction test
Transaction test succeeded
Running transaction
  Installing : 1:perl-parent-0.225-244.el7.noarch                                                                                                                                                           1/31 
  Installing : perl-HTTP-Tiny-0.033-3.el7.noarch                                                                                                                                                            2/31 
  Installing : perl-podlators-2.5.1-3.el7.noarch                                                                                                                                                            3/31 
  Installing : perl-Pod-Perldoc-3.20-4.el7.noarch                                                                                                                                                           4/31 
  Installing : 1:perl-Pod-Escapes-1.04-299.el7_9.noarch                                                                                                                                                     5/31 
  Installing : perl-Encode-2.51-7.el7.x86_64                                                                                                                                                                6/31 
  Installing : perl-Text-ParseWords-3.29-4.el7.noarch                                                                                                                                                       7/31 
  Installing : perl-Pod-Usage-1.63-3.el7.noarch                                                                                                                                                             8/31 
  Installing : 4:perl-macros-5.16.3-299.el7_9.x86_64                                                                                                                                                        9/31 
  Installing : perl-Storable-2.45-3.el7.x86_64                                                                                                                                                             10/31 
  Installing : perl-Exporter-5.68-3.el7.noarch                                                                                                                                                             11/31 
  Installing : perl-constant-1.27-2.el7.noarch                                                                                                                                                             12/31 
  Installing : perl-Socket-2.010-5.el7.x86_64                                                                                                                                                              13/31 
  Installing : perl-Time-Local-1.2300-2.el7.noarch                                                                                                                                                         14/31 
  Installing : perl-Carp-1.26-244.el7.noarch                                                                                                                                                               15/31 
  Installing : perl-PathTools-3.40-5.el7.x86_64                                                                                                                                                            16/31 
  Installing : perl-Scalar-List-Utils-1.27-248.el7.x86_64                                                                                                                                                  17/31 
  Installing : 1:perl-Pod-Simple-3.28-4.el7.noarch                                                                                                                                                         18/31 
  Installing : perl-File-Temp-0.23.01-3.el7.noarch                                                                                                                                                         19/31 
  Installing : perl-File-Path-2.09-2.el7.noarch                                                                                                                                                            20/31 
  Installing : perl-threads-shared-1.43-6.el7.x86_64                                                                                                                                                       21/31 
  Installing : perl-threads-1.87-4.el7.x86_64                                                                                                                                                              22/31 
  Installing : 4:perl-Time-HiRes-1.9725-3.el7.x86_64                                                                                                                                                       23/31 
  Installing : perl-Filter-1.49-3.el7.x86_64                                                                                                                                                               24/31 
  Installing : 4:perl-libs-5.16.3-299.el7_9.x86_64                                                                                                                                                         25/31 
  Installing : perl-Getopt-Long-2.40-3.el7.noarch                                                                                                                                                          26/31 
  Installing : 4:perl-5.16.3-299.el7_9.x86_64                                                                                                                                                              27/31 
  Installing : gpm-libs-1.20.7-6.el7.x86_64                                                                                                                                                                28/31 
  Installing : 2:vim-filesystem-7.4.629-8.el7_9.x86_64                                                                                                                                                     29/31 
  Installing : 2:vim-common-7.4.629-8.el7_9.x86_64                                                                                                                                                         30/31 
  Installing : 2:vim-enhanced-7.4.629-8.el7_9.x86_64                                                                                                                                                       31/31 
  Verifying  : perl-HTTP-Tiny-0.033-3.el7.noarch                                                                                                                                                            1/31 
  Verifying  : perl-threads-shared-1.43-6.el7.x86_64                                                                                                                                                        2/31 
  Verifying  : perl-Storable-2.45-3.el7.x86_64                                                                                                                                                              3/31 
  Verifying  : perl-Exporter-5.68-3.el7.noarch                                                                                                                                                              4/31 
  Verifying  : perl-constant-1.27-2.el7.noarch                                                                                                                                                              5/31 
  Verifying  : perl-PathTools-3.40-5.el7.x86_64                                                                                                                                                             6/31 
  Verifying  : 4:perl-macros-5.16.3-299.el7_9.x86_64                                                                                                                                                        7/31 
  Verifying  : 2:vim-enhanced-7.4.629-8.el7_9.x86_64                                                                                                                                                        8/31 
  Verifying  : 1:perl-parent-0.225-244.el7.noarch                                                                                                                                                           9/31 
  Verifying  : perl-Socket-2.010-5.el7.x86_64                                                                                                                                                              10/31 
  Verifying  : 2:vim-filesystem-7.4.629-8.el7_9.x86_64                                                                                                                                                     11/31 
  Verifying  : perl-File-Temp-0.23.01-3.el7.noarch                                                                                                                                                         12/31 
  Verifying  : 1:perl-Pod-Simple-3.28-4.el7.noarch                                                                                                                                                         13/31 
  Verifying  : perl-Time-Local-1.2300-2.el7.noarch                                                                                                                                                         14/31 
  Verifying  : 1:perl-Pod-Escapes-1.04-299.el7_9.noarch                                                                                                                                                    15/31 
  Verifying  : perl-Carp-1.26-244.el7.noarch                                                                                                                                                               16/31 
  Verifying  : 2:vim-common-7.4.629-8.el7_9.x86_64                                                                                                                                                         17/31 
  Verifying  : perl-Scalar-List-Utils-1.27-248.el7.x86_64                                                                                                                                                  18/31 
  Verifying  : perl-Pod-Usage-1.63-3.el7.noarch                                                                                                                                                            19/31 
  Verifying  : perl-Encode-2.51-7.el7.x86_64                                                                                                                                                               20/31 
  Verifying  : perl-Pod-Perldoc-3.20-4.el7.noarch                                                                                                                                                          21/31 
  Verifying  : perl-podlators-2.5.1-3.el7.noarch                                                                                                                                                           22/31 
  Verifying  : 4:perl-5.16.3-299.el7_9.x86_64                                                                                                                                                              23/31 
  Verifying  : perl-File-Path-2.09-2.el7.noarch                                                                                                                                                            24/31 
  Verifying  : perl-threads-1.87-4.el7.x86_64                                                                                                                                                              25/31 
  Verifying  : 4:perl-Time-HiRes-1.9725-3.el7.x86_64                                                                                                                                                       26/31 
  Verifying  : gpm-libs-1.20.7-6.el7.x86_64                                                                                                                                                                27/31 
  Verifying  : perl-Filter-1.49-3.el7.x86_64                                                                                                                                                               28/31 
  Verifying  : perl-Getopt-Long-2.40-3.el7.noarch                                                                                                                                                          29/31 
  Verifying  : perl-Text-ParseWords-3.29-4.el7.noarch                                                                                                                                                      30/31 
  Verifying  : 4:perl-libs-5.16.3-299.el7_9.x86_64                                                                                                                                                         31/31 

Installed:
  vim-enhanced.x86_64 2:7.4.629-8.el7_9                                                                                                                                                                          

Dependency Installed:
  gpm-libs.x86_64 0:1.20.7-6.el7               perl.x86_64 4:5.16.3-299.el7_9           perl-Carp.noarch 0:1.26-244.el7         perl-Encode.x86_64 0:2.51-7.el7          perl-Exporter.noarch 0:5.68-3.el7      
  perl-File-Path.noarch 0:2.09-2.el7           perl-File-Temp.noarch 0:0.23.01-3.el7    perl-Filter.x86_64 0:1.49-3.el7         perl-Getopt-Long.noarch 0:2.40-3.el7     perl-HTTP-Tiny.noarch 0:0.033-3.el7    
  perl-PathTools.x86_64 0:3.40-5.el7           perl-Pod-Escapes.noarch 1:1.04-299.el7_9 perl-Pod-Perldoc.noarch 0:3.20-4.el7    perl-Pod-Simple.noarch 1:3.28-4.el7      perl-Pod-Usage.noarch 0:1.63-3.el7     
  perl-Scalar-List-Utils.x86_64 0:1.27-248.el7 perl-Socket.x86_64 0:2.010-5.el7         perl-Storable.x86_64 0:2.45-3.el7       perl-Text-ParseWords.noarch 0:3.29-4.el7 perl-Time-HiRes.x86_64 4:1.9725-3.el7  
  perl-Time-Local.noarch 0:1.2300-2.el7        perl-constant.noarch 0:1.27-2.el7        perl-libs.x86_64 4:5.16.3-299.el7_9     perl-macros.x86_64 4:5.16.3-299.el7_9    perl-parent.noarch 1:0.225-244.el7     
  perl-podlators.noarch 0:2.5.1-3.el7          perl-threads.x86_64 0:1.87-4.el7         perl-threads-shared.x86_64 0:1.43-6.el7 vim-common.x86_64 2:7.4.629-8.el7_9      vim-filesystem.x86_64 2:7.4.629-8.el7_9

Complete!
[jess@bogon project]$ vim first.yaml
[jess@bogon project]$ ansible-playbook first.yaml

PLAY [create playbook] ******************************************************************************************************************************************************************************************

TASK [Gathering Facts] ******************************************************************************************************************************************************************************************
ok: [node2]

TASK [create user] **********************************************************************************************************************************************************************************************
ok: [node2]

TASK [delete user] **********************************************************************************************************************************************************************************************
changed: [node2]

PLAY RECAP ******************************************************************************************************************************************************************************************************
node2                      : ok=3    changed=1    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   

[jess@bogon project]$ ansible-playbook first.yaml

PLAY [create playbook] ******************************************************************************************************************************************************************************************

TASK [Gathering Facts] ******************************************************************************************************************************************************************************************
ok: [node2]

TASK [create user] **********************************************************************************************************************************************************************************************
changed: [node2]

TASK [delete user] **********************************************************************************************************************************************************************************************
changed: [node2]

PLAY RECAP ******************************************************************************************************************************************************************************************************
node2                      : ok=3    changed=2    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   

[jess@bogon project]$ vim first.yaml
[jess@bogon project]$ ansible-playbook first.yaml

PLAY [create playbook] ******************************************************************************************************************************************************************************************

TASK [Gathering Facts] ******************************************************************************************************************************************************************************************
ok: [node2]

TASK [create user] **********************************************************************************************************************************************************************************************
changed: [node2]

TASK [delete user] **********************************************************************************************************************************************************************************************
changed: [node2]

PLAY [create lisi] **********************************************************************************************************************************************************************************************

TASK [Gathering Facts] ******************************************************************************************************************************************************************************************
ok: [node2]

TASK [create user] **********************************************************************************************************************************************************************************************
changed: [node2]

PLAY RECAP ******************************************************************************************************************************************************************************************************
node2                      : ok=5    changed=3    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   

[jess@bogon project]$ 





Xshell 5 (Build 0964)
Copyright (c) 2002-2016 NetSarang Computer, Inc. All rights reserved.

Type `help' to learn how to use Xshell prompt.
[d:\~]$ 

Connecting to 192.168.72.131:22...
Connection established.
To escape to local shell, press 'Ctrl+Alt+]'.

Last login: Mon Oct 27 21:27:51 2025
[root@bogon ~]# su - jess
Last login: Mon Oct 27 21:01:25 EDT 2025 on pts/0
[jess@bogon ~]$ ll
total 4
-rw-rw-r--. 1 jess jess 38 Oct 27 10:42 inventory
drwxrwxr-x. 2 jess jess 60 Oct 27 23:05 project
[jess@bogon ~]$ ls
inventory  project
[jess@bogon ~]$ cd project
[jess@bogon project]$ ll
total 12
-rw-rw-r--. 1 jess jess 175 Oct 27 21:24 ansible.cfg
-rw-rw-r--. 1 jess jess 352 Oct 27 23:05 first.yaml
-rw-rw-r--. 1 jess jess  38 Oct 27 21:17 inventory
[jess@bogon project]$ cat first.yaml
---
- name: create playbook
  hosts: nodegroup
  tasks: 
    - name: create user
      user: 
        name: zhangsan
        state: present
    - name: delete user
      user: 
        name: zhangsan
        state: absent

- name: create lisi
  hosts: nodegroup
  tasks:
    - name: create user
      user:
        name: lisi
        state: present



[jess@bogon project]$ ll
total 12
-rw-rw-r--. 1 jess jess 175 Oct 27 21:24 ansible.cfg
-rw-rw-r--. 1 jess jess 352 Oct 27 23:05 first.yaml
-rw-rw-r--. 1 jess jess  38 Oct 27 21:17 inventory
[jess@bogon project]$ cat inventory
[qf2]
node2

[nodegroup:children]
qf2
[jess@bogon project]$ vim website.yml
[jess@bogon project]$ vim website.yml
[jess@bogon project]$ ansible-playbook website.yml -C

PLAY [start httpd service and welcome index html] ***************************************************************************************************************************************************************

TASK [Gathering Facts] ******************************************************************************************************************************************************************************************
ok: [node2]

TASK [step1 - install yum httpd] ********************************************************************************************************************************************************************************
changed: [node2]

TASK [step2 - create index html - execute copy] *****************************************************************************************************************************************************************
changed: [node2]

TASK [step3 - start service] ************************************************************************************************************************************************************************************
changed: [node2]

TASK [step4 - start firewalld] **********************************************************************************************************************************************************************************
ok: [node2]

TASK [step5 - firewalld-can-80] *********************************************************************************************************************************************************************************
changed: [node2]

PLAY RECAP ******************************************************************************************************************************************************************************************************
node2                      : ok=6    changed=4    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   

[jess@bogon project]$ ansible-playbook website.yml

PLAY [start httpd service and welcome index html] ***************************************************************************************************************************************************************

TASK [Gathering Facts] ******************************************************************************************************************************************************************************************
ok: [node2]

TASK [step1 - install yum httpd] ********************************************************************************************************************************************************************************
changed: [node2]

TASK [step2 - create index html - execute copy] *****************************************************************************************************************************************************************
changed: [node2]

TASK [step3 - start service] ************************************************************************************************************************************************************************************
changed: [node2]

TASK [step4 - start firewalld] **********************************************************************************************************************************************************************************
ok: [node2]

TASK [step5 - firewalld-can-80] *********************************************************************************************************************************************************************************
changed: [node2]

PLAY RECAP ******************************************************************************************************************************************************************************************************
node2                      : ok=6    changed=4    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   

[jess@bogon project]$ curl http://node2
www.qfedu.com[jess@bogon project]$ 
[jess@bogon project]$ cat website.yml
---
- name: start httpd service and welcome index html
  hosts: qf2
  tasks:
        - name: step1 - install yum httpd
          yum: 
                name: httpd
                state: latest
        - name: step2 - create index html - execute copy
          copy: 
                content: 'www.qfedu.com'
                dest: /var/www/html/index.html
        - name: step3 - start service
          service:
                name: httpd
                state: started
                enabled: yes
        - name: step4 - start firewalld
          service:
                name: firewalld
                state: started
                enabled: yes
        - name: step5 - firewalld-can-80
          firewalld:
                port: 80/tcp
                permanent: yes
                immediate: yes
                state: enabled

  
[jess@bogon project]$ vim website.yml
[jess@bogon project]$ ansible-playbook website.yml -C

PLAY [start httpd service and welcome index html] ***************************************************************************************************************************************************************

TASK [Gathering Facts] ******************************************************************************************************************************************************************************************
ok: [node2]

TASK [step1 - install yum httpd] ********************************************************************************************************************************************************************************
ok: [node2]

TASK [step2 - create index html - execute copy] *****************************************************************************************************************************************************************
ok: [node2]

TASK [step3 - start service] ************************************************************************************************************************************************************************************
ok: [node2]

TASK [step4 - start firewalld] **********************************************************************************************************************************************************************************
ok: [node2]

TASK [step5 - firewalld-can-80] *********************************************************************************************************************************************************************************
ok: [node2]

TASK [step6 - curl-indexhtml] ***********************************************************************************************************************************************************************************
skipping: [node2]

PLAY RECAP ******************************************************************************************************************************************************************************************************
node2                      : ok=6    changed=0    unreachable=0    failed=0    skipped=1    rescued=0    ignored=0   

[jess@bogon project]$ ansible-playbook website.yml

PLAY [start httpd service and welcome index html] ***************************************************************************************************************************************************************

TASK [Gathering Facts] ******************************************************************************************************************************************************************************************
ok: [node2]

TASK [step1 - install yum httpd] ********************************************************************************************************************************************************************************
ok: [node2]

TASK [step2 - create index html - execute copy] *****************************************************************************************************************************************************************
ok: [node2]

TASK [step3 - start service] ************************************************************************************************************************************************************************************
ok: [node2]

TASK [step4 - start firewalld] **********************************************************************************************************************************************************************************
ok: [node2]

TASK [step5 - firewalld-can-80] *********************************************************************************************************************************************************************************
ok: [node2]

TASK [step6 - curl-indexhtml] ***********************************************************************************************************************************************************************************
[WARNING]: Consider using the get_url or uri module rather than running 'curl'.  If you need to use command because get_url or uri is insufficient you can add 'warn: false' to this command task or set
'command_warnings=False' in ansible.cfg to get rid of this message.
fatal: [node2]: FAILED! => {"changed": true, "cmd": "curl http://node2", "delta": "0:00:15.543287", "end": "2025-10-28 03:20:48.359870", "msg": "non-zero return code", "rc": 6, "start": "2025-10-28 03:20:32.816583", "stderr": "  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current\n                                 Dload  Upload   Total   Spent    Left  Speed\n\r  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0\r  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0\r  0     0    0     0    0     0      0      0 --:--:--  0:00:01 --:--:--     0\r  0     0    0     0    0     0      0      0 --:--:--  0:00:02 --:--:--     0\r  0     0    0     0    0     0      0      0 --:--:--  0:00:03 --:--:--     0\r  0     0    0     0    0     0      0      0 --:--:--  0:00:04 --:--:--     0\r  0     0    0     0    0     0      0      0 --:--:--  0:00:05 --:--:--     0\r  0     0    0     0    0     0      0      0 --:--:--  0:00:06 --:--:--     0\r  0     0    0     0    0     0      0      0 --:--:--  0:00:07 --:--:--     0\r  0     0    0     0    0     0      0      0 --:--:--  0:00:08 --:--:--     0\r  0     0    0     0    0     0      0      0 --:--:--  0:00:09 --:--:--     0\r  0     0    0     0    0     0      0      0 --:--:--  0:00:10 --:--:--     0\r  0     0    0     0    0     0      0      0 --:--:--  0:00:11 --:--:--     0\r  0     0    0     0    0     0      0      0 --:--:--  0:00:12 --:--:--     0\r  0     0    0     0    0     0      0      0 --:--:--  0:00:13 --:--:--     0\r  0     0    0     0    0     0      0      0 --:--:--  0:00:14 --:--:--     0curl: (6) Could not resolve host: node2; Name or service not known", "stderr_lines": ["  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current", "                                 Dload  Upload   Total   Spent    Left  Speed", "", "  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0", "  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0", "  0     0    0     0    0     0      0      0 --:--:--  0:00:01 --:--:--     0", "  0     0    0     0    0     0      0      0 --:--:--  0:00:02 --:--:--     0", "  0     0    0     0    0     0      0      0 --:--:--  0:00:03 --:--:--     0", "  0     0    0     0    0     0      0      0 --:--:--  0:00:04 --:--:--     0", "  0     0    0     0    0     0      0      0 --:--:--  0:00:05 --:--:--     0", "  0     0    0     0    0     0      0      0 --:--:--  0:00:06 --:--:--     0", "  0     0    0     0    0     0      0      0 --:--:--  0:00:07 --:--:--     0", "  0     0    0     0    0     0      0      0 --:--:--  0:00:08 --:--:--     0", "  0     0    0     0    0     0      0      0 --:--:--  0:00:09 --:--:--     0", "  0     0    0     0    0     0      0      0 --:--:--  0:00:10 --:--:--     0", "  0     0    0     0    0     0      0      0 --:--:--  0:00:11 --:--:--     0", "  0     0    0     0    0     0      0      0 --:--:--  0:00:12 --:--:--     0", "  0     0    0     0    0     0      0      0 --:--:--  0:00:13 --:--:--     0", "  0     0    0     0    0     0      0      0 --:--:--  0:00:14 --:--:--     0curl: (6) Could not resolve host: node2; Name or service not known"], "stdout": "", "stdout_lines": []}

PLAY RECAP ******************************************************************************************************************************************************************************************************
node2                      : ok=6    changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   

[jess@bogon project]$ vim website.yml
[jess@bogon project]$ ansible-playbook website.yml

PLAY [start httpd service and welcome index html] ***************************************************************************************************************************************************************

TASK [Gathering Facts] ******************************************************************************************************************************************************************************************
ok: [node2]

TASK [step1 - install yum httpd] ********************************************************************************************************************************************************************************
ok: [node2]

TASK [step2 - create index html - execute copy] *****************************************************************************************************************************************************************
ok: [node2]

TASK [step3 - start service] ************************************************************************************************************************************************************************************
ok: [node2]

TASK [step4 - start firewalld] **********************************************************************************************************************************************************************************
ok: [node2]

TASK [step5 - firewalld-can-80] *********************************************************************************************************************************************************************************
ok: [node2]

PLAY RECAP ******************************************************************************************************************************************************************************************************
node2                      : ok=6    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   

[jess@bogon project]$ ping node2
PING node2 (192.168.72.133) 56(84) bytes of data.
64 bytes from node2 (192.168.72.133): icmp_seq=1 ttl=64 time=0.587 ms
64 bytes from node2 (192.168.72.133): icmp_seq=2 ttl=64 time=0.805 ms
64 bytes from node2 (192.168.72.133): icmp_seq=3 ttl=64 time=12.7 ms
64 bytes from node2 (192.168.72.133): icmp_seq=4 ttl=64 time=0.432 ms
^C
--- node2 ping statistics ---
4 packets transmitted, 4 received, 0% packet loss, time 3003ms
rtt min/avg/max/mdev = 0.432/3.639/12.733/5.252 ms
[jess@bogon project]$ vim website.yml
[jess@bogon project]$ ansible-playbook website.yml

PLAY [start httpd service and welcome index html] ***************************************************************************************************************************************************************

TASK [Gathering Facts] ******************************************************************************************************************************************************************************************
ok: [node2]

TASK [step1 - install yum httpd] ********************************************************************************************************************************************************************************
ok: [node2]

TASK [step2 - create index html - execute copy] *****************************************************************************************************************************************************************
ok: [node2]

TASK [step3 - start service] ************************************************************************************************************************************************************************************
ok: [node2]

TASK [step4 - start firewalld] **********************************************************************************************************************************************************************************
ok: [node2]

TASK [step5 - firewalld-can-80] *********************************************************************************************************************************************************************************
ok: [node2]

TASK [step6 - curl indexhtml] ***********************************************************************************************************************************************************************************
[WARNING]: Consider using the get_url or uri module rather than running 'curl'.  If you need to use command because get_url or uri is insufficient you can add 'warn: false' to this command task or set
'command_warnings=False' in ansible.cfg to get rid of this message.
changed: [node2]

PLAY RECAP ******************************************************************************************************************************************************************************************************
node2                      : ok=7    changed=1    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   

[jess@bogon project]$ vim website.yml
[jess@bogon project]$ ansible-playbook website.yml

PLAY [start httpd service and welcome index html] ***************************************************************************************************************************************************************

TASK [Gathering Facts] ******************************************************************************************************************************************************************************************
ok: [node2]

TASK [step1 - install yum httpd] ********************************************************************************************************************************************************************************
ok: [node2]

TASK [step2 - create index html - execute copy] *****************************************************************************************************************************************************************
ok: [node2]

TASK [step3 - start service] ************************************************************************************************************************************************************************************
ok: [node2]

TASK [step4 - start firewalld] **********************************************************************************************************************************************************************************
ok: [node2]

TASK [step5 - firewalld-can-80] *********************************************************************************************************************************************************************************
ok: [node2]

TASK [step6 - curl indexhtml] ***********************************************************************************************************************************************************************************
changed: [node2]

PLAY RECAP ******************************************************************************************************************************************************************************************************
node2                      : ok=7    changed=1    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   

[jess@bogon project]$ vim website.yml
[jess@bogon project]$ vim website.yml
[jess@bogon project]$ ansible-playbook website.yml

PLAY [start httpd service and welcome index html] ***************************************************************************************************************************************************************

TASK [Gathering Facts] ******************************************************************************************************************************************************************************************
ok: [node2]

TASK [step1 - install yum httpd] ********************************************************************************************************************************************************************************
ok: [node2]

TASK [step2 - create index html - execute copy] *****************************************************************************************************************************************************************
ok: [node2]

TASK [step3 - start service] ************************************************************************************************************************************************************************************
ok: [node2]

TASK [step4 - start firewalld] **********************************************************************************************************************************************************************************
ok: [node2]

TASK [step5 - firewalld-can-80] *********************************************************************************************************************************************************************************
ok: [node2]

PLAY RECAP ******************************************************************************************************************************************************************************************************
node2                      : ok=6    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   

[jess@bogon project]$ curl http://node2
www.qfedu.com[jess@bogon project]$ 
[jess@bogon project]$ 


[jess@bogon project]$ ansible-playbook website.yml 

PLAY [start httpd service and welcome index html] ***************************************************************************************************************************************************************

TASK [Gathering Facts] ******************************************************************************************************************************************************************************************
ok: [node2]

TASK [step1 - install yum httpd] ********************************************************************************************************************************************************************************
ok: [node2]

TASK [step2 - create index html - execute copy] *****************************************************************************************************************************************************************
ok: [node2]

TASK [step3 - start service] ************************************************************************************************************************************************************************************
ok: [node2]

TASK [step4 - start firewalld] **********************************************************************************************************************************************************************************
ok: [node2]

TASK [step5 - firewalld-can-80] *********************************************************************************************************************************************************************************
ok: [node2]

PLAY [test url html status-more tasks test] *********************************************************************************************************************************************************************

TASK [Gathering Facts] ******************************************************************************************************************************************************************************************
ok: [localhost]

TASK [test url-curl page] ***************************************************************************************************************************************************************************************
ok: [localhost]

PLAY RECAP ******************************************************************************************************************************************************************************************************
localhost                  : ok=2    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
node2                      : ok=6    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   

[jess@bogon project]$ cat website.yml 
---
- name: start httpd service and welcome index html
  hosts: qf2
  tasks:
        - name: step1 - install yum httpd
          yum: 
                name: httpd
                state: latest
        - name: step2 - create index html - execute copy
          copy: 
                content: 'www.qfedu.com'
                dest: /var/www/html/index.html
        - name: step3 - start service
          service:
                name: httpd
                state: started
                enabled: yes
        - name: step4 - start firewalld
          service:
                name: firewalld
                state: started
                enabled: yes
        - name: step5 - firewalld-can-80
          firewalld:
                port: 80/tcp
                permanent: yes
                immediate: yes
                state: enabled
#        - name: step6 - curl indexhtml
#          shell: curl http://192.168.72.133:80
#          args:
#                warn: no

- name: test url html status-more tasks test
  hosts: localhost
  tasks: 
        - name:  test url-curl page
          uri: 
                url: http://node2
                method: POST
                return_content: yes
                status_code: 200



搜索：/EXAMP
```

```bash
Xshell 5 (Build 0964)
Copyright (c) 2002-2016 NetSarang Computer, Inc. All rights reserved.

Type `help' to learn how to use Xshell prompt.
[d:\~]$ 

Connecting to 192.168.72.133:22...
Connection established.
To escape to local shell, press 'Ctrl+Alt+]'.

Last login: Mon Oct 27 08:45:19 2025 from 192.168.72.1
[root@bogon ~]# id qfuser
uid=1002(qfuser) gid=1002(qfuser) groups=1002(qfuser)
[root@bogon ~]# id zhangsan
uid=1003(zhangsan) gid=1003(zhangsan) groups=1003(zhangsan)
[root@bogon ~]# id zhangsan
id: zhangsan: no such user
[root@bogon ~]# id zhangsan
id: zhangsan: no such user
[root@bogon ~]# id zhangsan
id: zhangsan: no such user
[root@bogon ~]# id lisi
id: lisi: no such user
[root@bogon ~]# id lisi
uid=1003(lisi) gid=1003(lisi) groups=1003(lisi)
[root@bogon ~]# id zhangsna
id: zhangsna: no such user
[root@bogon ~]# id zhangsan
id: zhangsan: no such user
[root@bogon ~]# 

```